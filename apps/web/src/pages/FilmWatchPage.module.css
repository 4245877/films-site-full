/* ============================================
   FilmWatchPage.module.css
   Сторінка перегляду фільму
   ============================================ */

/* ============================================
   1. BACK LINK (Навігація назад)
   ============================================ */
.backLink {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.75rem 1.25rem;
  margin-bottom: 2rem;
  
  font-size: 0.9375rem;
  font-weight: 500;
  color: var(--muted);
  text-decoration: none;
  
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: var(--radius-1);
  
  box-shadow: var(--shadow-1);
  
  transition:
    transform var(--transition-fast),
    background-color var(--transition-base),
    color var(--transition-base),
    border-color var(--transition-base),
    box-shadow var(--transition-base);
  
  will-change: transform;
}

@media (hover: hover) and (prefers-reduced-motion: no-preference) {
  .backLink:hover {
    color: var(--accent);
    background: color-mix(in oklab, var(--accent) 4%, var(--panel));
    border-color: color-mix(in oklab, var(--accent) 20%, var(--border));
    box-shadow: 
      var(--shadow-2),
      0 0 0 1px color-mix(in oklab, var(--accent) 12%, transparent);
    transform: translateX(-4px);
    text-decoration: none;
  }
}

.backLink:active {
  transform: translateX(-2px) scale(0.98);
}

@media (max-width: 767px) {
  .backLink {
    padding: 0.625rem 1rem;
    font-size: 0.875rem;
    margin-bottom: 1.5rem;
  }
}

/* ============================================
   2. TITLE (Заголовок фільму)
   ============================================ */
.title {
  margin-bottom: 0.75rem;
  font-size: clamp(2rem, 5vw, 3rem);
  font-weight: 700;
  letter-spacing: -0.03em;
  line-height: 1.1;
  color: var(--text);
  text-wrap: balance;
  
  background: linear-gradient(
    135deg,
    var(--text) 0%,
    var(--accent) 100%
  );
  background-clip: text;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  
  transition: opacity var(--transition-base);
}

@media (prefers-reduced-motion: no-preference) {
  .title {
    animation: slideUp var(--dur-3) var(--ease-out);
  }
}

@media (hover: hover) {
  .title:hover {
    opacity: 0.88;
  }
}

@media (max-width: 767px) {
  .title {
    font-size: clamp(1.75rem, 6vw, 2.25rem);
    margin-bottom: 0.5rem;
  }
}

/* ============================================
   3. YEAR (Рік випуску)
   ============================================ */
.year {
  display: inline-flex;
  align-items: center;
  padding: 0.5rem 1rem;
  margin-bottom: 2rem;
  
  font-size: 0.875rem;
  font-weight: 600;
  color: var(--accent);
  
  background: linear-gradient(
    135deg,
    color-mix(in oklab, var(--accent) 8%, transparent),
    color-mix(in oklab, var(--accent-secondary) 6%, transparent)
  );
  border: 1px solid color-mix(in oklab, var(--accent) 18%, transparent);
  border-radius: var(--radius-1);
  
  box-shadow: 
    0 2px 8px color-mix(in oklab, var(--accent) 8%, transparent),
    inset 0 1px 0 color-mix(in oklab, var(--c-white) 10%, transparent);
  
  transition:
    transform var(--transition-fast),
    box-shadow var(--transition-base),
    background var(--transition-base);
}

@media (prefers-reduced-motion: no-preference) {
  .year {
    animation: scaleIn var(--dur-3) var(--ease-spring) 0.1s backwards;
  }
}

@media (hover: hover) {
  .year:hover {
    transform: translateY(-2px);
    box-shadow: 
      0 4px 12px color-mix(in oklab, var(--accent) 14%, transparent),
      inset 0 1px 0 color-mix(in oklab, var(--c-white) 15%, transparent);
  }
}

@media (max-width: 767px) {
  .year {
    padding: 0.375rem 0.875rem;
    font-size: 0.8125rem;
    margin-bottom: 1.5rem;
  }
}

/* ============================================
   4. VIDEO WRAPPER (Контейнер медіа)
   ============================================ */
.videoWrapper {
  position: relative;
  width: 100%;
  max-width: 1120px;
  margin: 0 auto 3rem;
  
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: var(--radius-3);
  
  overflow: hidden;
  box-shadow: var(--shadow-2);
  
  transition:
    box-shadow var(--transition-slow),
    transform var(--transition-base);
}

@media (prefers-reduced-motion: no-preference) {
  .videoWrapper {
    animation: fadeIn var(--dur-4) var(--ease-out) 0.2s backwards;
  }
}

@media (hover: hover) {
  .videoWrapper:hover {
    box-shadow: 
      var(--shadow-3),
      0 0 0 1px color-mix(in oklab, var(--accent) 16%, transparent);
  }
}

/* Aspect ratio 16:9 для iframe/video */
.videoWrapper::before {
  content: '';
  display: block;
  padding-top: 56.25%; /* 9/16 = 0.5625 */
}

@media (max-width: 767px) {
  .videoWrapper {
    margin-bottom: 2rem;
    border-radius: var(--radius-2);
  }
}

/* ============================================
   5. MEDIA FRAME (iframe / video)
   ============================================ */
.mediaFrame {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  
  border: none;
  border-radius: inherit;
  
  background: color-mix(in oklab, var(--text) 4%, var(--panel));
  
  transition: opacity var(--transition-base);
}

.mediaFrame:focus-visible {
  outline: 3px solid var(--accent);
  outline-offset: -3px;
  z-index: var(--z-base);
}

/* Специфічні стилі для iframe */
.iframe {
  background: color-mix(in oklab, var(--c-ink-900) 8%, var(--panel));
}

/* Специфічні стилі для video */
.mediaFrame[controls] {
  object-fit: contain;
}

@media (prefers-reduced-motion: no-preference) {
  .mediaFrame {
    animation: fadeIn var(--dur-3) var(--ease-out) 0.3s backwards;
  }
}

/* ============================================
   6. EXTERNAL LINK (Зовнішнє посилання)
   ============================================ */
.externalLink {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  
  display: inline-flex;
  align-items: center;
  gap: 0.75rem;
  padding: 1.25rem 2rem;
  
  font-size: 1.125rem;
  font-weight: 600;
  color: var(--c-white);
  text-decoration: none;
  
  background: linear-gradient(
    135deg,
    var(--accent-strong),
    var(--accent)
  );
  border-radius: var(--radius-2);
  
  box-shadow: 
    0 4px 16px color-mix(in oklab, var(--accent) 28%, transparent),
    0 12px 32px color-mix(in oklab, var(--accent-strong) 20%, transparent),
    inset 0 1px 0 color-mix(in oklab, var(--c-white) 16%, transparent);
  
  transition:
    transform var(--transition-base),
    box-shadow var(--transition-base),
    background var(--transition-base);
  
  will-change: transform;
}

@media (prefers-reduced-motion: no-preference) {
  .externalLink {
    animation: 
      scaleIn var(--dur-3) var(--ease-spring) 0.4s backwards,
      pulse 2s var(--ease-in-out) infinite 1s;
  }
}

@media (hover: hover) {
  .externalLink:hover {
    transform: translate(-50%, -50%) translateY(-4px) scale(1.05);
    background: linear-gradient(
      135deg,
      var(--accent),
      var(--accent-secondary)
    );
    box-shadow: 
      0 8px 24px color-mix(in oklab, var(--accent) 36%, transparent),
      0 20px 48px color-mix(in oklab, var(--accent-strong) 28%, transparent),
      inset 0 1px 0 color-mix(in oklab, var(--c-white) 24%, transparent);
  }
}

.externalLink:active {
  transform: translate(-50%, -50%) translateY(-2px) scale(1.02);
}

.externalLink:focus-visible {
  outline: 3px solid var(--c-white);
  outline-offset: 4px;
  box-shadow: 
    0 8px 24px color-mix(in oklab, var(--accent) 36%, transparent),
    0 0 0 6px color-mix(in oklab, var(--accent) 40%, transparent);
}

@media (max-width: 767px) {
  .externalLink {
    padding: 1rem 1.5rem;
    font-size: 1rem;
    gap: 0.5rem;
  }
}

/* ============================================
   7. NO VIDEO (Placeholder)
   ============================================ */
.noVideo {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  
  max-width: 90%;
  padding: 2rem;
  
  font-size: 1rem;
  font-weight: 500;
  color: var(--muted);
  text-align: center;
  line-height: 1.6;
  
  background: color-mix(in oklab, var(--warning) 6%, var(--panel));
  border: 2px dashed var(--border);
  border-radius: var(--radius-2);
  
  transition:
    color var(--transition-base),
    background var(--transition-base),
    border-color var(--transition-base);
}

@media (prefers-reduced-motion: no-preference) {
  .noVideo {
    animation: fadeIn var(--dur-3) var(--ease-out) 0.3s backwards;
  }
}

@media (hover: hover) {
  .noVideo:hover {
    color: var(--accent);
    background: color-mix(in oklab, var(--accent) 4%, var(--panel));
    border-color: color-mix(in oklab, var(--accent) 20%, var(--border));
  }
}

@media (max-width: 767px) {
  .noVideo {
    padding: 1.5rem;
    font-size: 0.9375rem;
  }
}

/* ============================================
   8. DESCRIPTION (Опис фільму)
   ============================================ */
.description {
  max-width: 800px;
  margin: 0 auto;
  padding: 2rem;
  
  font-size: 1.0625rem;
  line-height: 1.75;
  color: var(--text);
  
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: var(--radius-2);
  
  box-shadow: var(--shadow-1);
  
  transition:
    box-shadow var(--transition-base),
    background-color var(--transition-base);
}

@media (prefers-reduced-motion: no-preference) {
  .description {
    animation: slideUp var(--dur-4) var(--ease-out) 0.5s backwards;
  }
}

@media (hover: hover) {
  .description:hover {
    box-shadow: var(--shadow-2);
    background: color-mix(in oklab, var(--accent) 2%, var(--panel));
  }
}

@media (max-width: 767px) {
  .description {
    padding: 1.5rem;
    font-size: 1rem;
    line-height: 1.65;
  }
}

/* ============================================
   9. ANIMATIONS (Keyframes)
   ============================================ */
@keyframes pulse {
  0%, 100% {
    transform: translate(-50%, -50%) scale(1);
  }
  50% {
    transform: translate(-50%, -50%) scale(1.02);
  }
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(24px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes scaleIn {
  from {
    opacity: 0;
    transform: scale(0.94);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* ============================================
   10. ACCESSIBILITY & PRINT
   ============================================ */
@media (prefers-reduced-motion: reduce) {
  /* ВИПРАВЛЕНО: замінено селектор "*" на список конкретних класів,
     щоб уникнути помилки "Selector is not pure".
  */
  .backLink,
  .title,
  .year,
  .videoWrapper,
  .mediaFrame,
  .externalLink,
  .noVideo,
  .description {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
  
  .externalLink {
    animation: none !important;
  }
}

@media print {
  .backLink,
  .videoWrapper,
  .externalLink {
    display: none !important;
  }
  
  .title,
  .year,
  .description {
    background: var(--c-white) !important;
    color: var(--c-ink-900) !important;
    box-shadow: none !important;
    border: 1px solid var(--c-ink-900) !important;
  }
}

/* ============================================
   11. DARK MODE REFINEMENTS
   ============================================ */
@media (prefers-color-scheme: dark) {
  .videoWrapper {
    background: color-mix(in oklab, var(--panel) 95%, var(--accent));
    box-shadow: 
      var(--shadow-2),
      inset 0 0 0 1px color-mix(in oklab, var(--c-white) 4%, transparent);
  }
  
  .externalLink {
    box-shadow: 
      0 4px 16px color-mix(in oklab, var(--accent) 38%, transparent),
      0 12px 32px color-mix(in oklab, var(--accent-strong) 28%, transparent),
      inset 0 1px 0 color-mix(in oklab, var(--c-white) 12%, transparent),
      inset 0 -1px 0 color-mix(in oklab, var(--c-ink-900) 20%, transparent);
  }
  
  @media (hover: hover) {
    .externalLink:hover {
      box-shadow: 
        0 8px 24px color-mix(in oklab, var(--accent) 48%, transparent),
        0 20px 48px color-mix(in oklab, var(--accent-strong) 36%, transparent),
        inset 0 1px 0 color-mix(in oklab, var(--c-white) 18%, transparent);
    }
  }
}